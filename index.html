<!DOCTYPE html>
<html data-ng-app="myApp">
<head>
<!--   <meta http-equiv="Content-Security-Policy" content="default-src 'self' data: gap: https://ssl.gstatic.com 'unsafe-inline' 'unsafe-eval'; style-src 'self' 'unsafe-inline'; media-src *"> -->

  <title>Crafty Wars</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="bootstrap/css/bootstrap.css">
  <link rel="stylesheet" href="bootstrap/css/bootstrap-theme.min.css">
</head>

<body>
  <h1 id="greeting"></h1>
  <hr>
  
  <div class="container">
    <div data-ng-controller="TimerCtrl">
      <div id="datetime">
        <h1>{{ date.raw | date:'hh mm ss' }}</h1>
      </div>
    </div>
  </div>
  
  <hr>
  
  <div class="col-lg-12">
    <div data-ng-controller="MainCtrl">
      <input type="text" id="txtApiKey" class="form-control" placeholder="API Key" data-ngchange="utils.updateView()" data-ng-model="utils.apiKey"></input>

      <div class="input-group">
        <input type="text" id="txtSearch" class="form-control" placeholder="Search...">
        <span class="input-group-btn">
          <button data-ng-click="utils.updateView()" class="btn btn-secondary" id="btnSearch" type="button"><span class="glyphicon glyphicon-search"></span></button>
        </span>
      </div>
    </div>
  </div>
  
  <hr>

  <div class="col-lg-1">
    <div data-ng-controller="FilterCtrl">
      <button data-ng-click="test1()" class="btn btn-secondary" type="button">Debug</button>
      <form class="form-inline">
        <div class="checkbox" data-ng-repeat="craft in crafting.crafts">
          <input type="checkbox" checklist-model="crafting.selectedDisciplinesModel" checklist-value="craft.discipline"> 
            {{ craft.discipline }} &nbsp;&nbsp; 
          </input>
        </div>
        <div class="checkbox">
          <input type="checkbox" data-ng-click="crafting.updateAllDisciplines($event)" data-ng-checked="crafting.isAllSelected()"> 
            Select All
          </input>
        </div>
      </form>

      <div class="inline" data-ng-repeat="class in crafting.craftClass">
        <label>&nbsp;&nbsp;  {{class | capitalize }}:  </label>
        <multiselect data-ng-click="crafting.updateSelectedTypes()" data-ng-model="crafting.selectedTypeModels[class]" options="(t | stringify) for t in crafting.craftType[class]" data-multiple="true" scroll-after-rows="10" filter-after-rows="10" max-width="100">
        </multiselect>

      </div>

      <br>
      <div>
        {{ crafting.selectedTypeModels["weapon"] }}
        {{ crafting.recipeIds }}

        <table st-safe-src="crafting.items" st-table="displayedCollection" class="table table-striped">
            <thead>
              <tr>
                <th st-ratio="40" st-sort="id">id</th>
                <th st-ratio="40">category</th>
                <th st-ratio="20">count</th>
              </tr>
              <th>
                <input st-search="id" placeholder="search id" class="input-sm form-control" type="search"/>
              </th>
              <th>
                <input st-search="category" placeholder="search category" class="input-sm form-control" type="search"/>
              </th>
              <th>
                <input st-search="count" placeholder="search count" class="input-sm form-control" type="search"/>
              </th>
            </thead>
            <tbody>
              <tr ng-repeat="item in displayedCollection">
                <td>{{item.id}}</td>
                <td>{{item.category}}</td>
                <td>{{item.count}}</td>
              </tr>
            </tbody>
          <tfoot>
            <tr>
              <td colspan="5" class="text-center">
                <div st-items-by-page="10" st-pagination="" st-template="js/vendors/smart-table/pagination.custom.html"></div>
              </td>
            </tr>
          </tfoot>
        </table>

        <!-- {{ crafting.items }} -->
      </div>
<div ng-show="isLoading" class="loading-indicator"></div>
    </div>
  </div>


  <script src="js/vendors/tether.min.js"></script>
  <script src="js/vendors/jquery.min.js"></script>
  <script src="bootstrap/js/bootstrap.min.js"></script>
  <script src="js/vendors/angular.min.js"></script>
  <script src="js/vendors/smart-table/smart-table.min.js"></script>
  <script src="js/vendors/underscore-min.js"></script>-
  <script src="js/vendors/checklist-model.js"></script>
  <script src="js/vendors/angular-bootstrap-multiselect.js"></script>
  <script src="js/vendors/lrInfiniteScrollPlugin.js"></script>
  <script src="js/main.js"></script>
  <script src="js/app.js"></script>
  <script src="js/utils.js"></script>
  <script src="js/constants.js"></script>
</body>
</html>
